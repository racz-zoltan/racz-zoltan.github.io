<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CarryPass Admin Tool</title>
  <meta name="description" content="Generate secure, deterministic passwords offline with CarryPass.">
  <link rel="stylesheet" href="carrypass-multicolumn-theme.css">
  <script src="lucide.min.js"></script>
  <link rel="icon" href="favicon.ico">

</head>
<body>
  <a href="pwa-carrypass-password.html" class="logo-link">
    <img src="carrypass-gold-transparent.png" alt="CarryPass logo" class="logo-img">
  </a>
  <div class="lang-toggle">
    <a href="pwa-carrypass-password.html" class="lang-link">PASSWORD</a>
    |
    <a href="pwa-carrypass-teams.html" class="lang-link">TEAMS</a>
    |
    <a href="#" onclick="switchOff()" class="lang-link"><i data-lucide="power"></i></span></a>
  </div>
  <div class="header-wrapper">
    <h1>CarryPass Admin Tool</h1>
    <div class="tabs">
      <button class="tab-button active" onclick="switchTab('generatePadView')"><i data-lucide="file-lock-2"></i>  Generate Pad</button>
      <button class="tab-button" onclick="switchTab('teamConfig')"><i data-lucide="file-key-2"></i>  Create Team Config</button>
    </div>
  </div>

<!-- DOM Elements for CarryPass Admin UI -->
<div class="tab-content active" id="generatePadView">
  <div class="container functions" style="margin-bottom: 2rem;">
  <h2>Generate Pad</h2>
  <button onclick="generatePad()" class="btn outline-gold">Generate 1,000,000-Char Pad</button>
  <textarea style="margin-top: 1rem;" id="padOutput" readonly placeholder="Your pad will appear here..."></textarea>
  <button onclick="downloadPad()" class="btn secondary-outline">Download Pad</button>
  </div>
</div>

<div class="tab-content" id="teamConfig">
  
  <div class="container functions" style="margin-bottom: 2rem;">
    <h2>Create Team Config</h2>
    <label for="teamName">Team Name  (max. 15 char.)</label>
    <input id="teamName" maxlength="15" placeholder="e.g., Marketing">

    <label for="accessCode">Access Code  (min. 9 - max. 23 char.)</label>
    <input id="accessCode" maxlength="23" placeholder="e.g., CWXb330ZZc">

    <label for="expiryDate">Expiration Date (optional)</label>
    <input id="expiryDate" type="date">


    <div class="custom-dropdown-container">
      <label for="flavorSelect" class="dropdown-label">Encryption Flavor</label>
      <div class="custom-dropdown">
        <select id="flavorSelect" class="form-control">
          <option value="vortex">Vortex (recommended)</option>
          <option value="scatter">Scatter</option>
          <option value="pinwheel">Pinwheel</option>
          <option value="shift5">Shift5</option>
          <option value="default">Default</option>
        </select>
      </div>
    </div>
  </div>

  <div class="container functions" style="margin-bottom: 2rem;">
    <div id="services">
      <p>Services</p>
    </div>
    <button onclick="addService()" class="btn outline-gold">Add Service</button>
    <div id="alert-container" style="position: fixed; top: 1rem; right: 1rem; z-index: 9999;"></div>


    <div class="button-wrapper">
      <button onclick="encryptTeamConfig()" class="btn strong">Encrypt Config</button>
      <button onclick="clearForm()" class="btn secondary-outline">Clear Form</button>
    </div>
  </div>
  <div id="existingConfigs"></div>
  <div class="container functions" style="margin-bottom: 2rem;">
    <div class="grid split">
      <div class="card">
        <p>After creating the team config files, remember to save the QR image for onboarding and read it with a TOTP application.</p>
        <p>On first creation of a team config, remember to save the carrypass-configs.json file along with the carrypass-<em>team name</em>.encrypted.json file on the server.</p>
        <p>After editing a team config, remember to change the carrypass-<em>team name</em>.encrypted.json file on the server.</p>
        <p>After deleting an expired team config, remember to delete the team from the carrypass-configs.json file on the server.</p>
      </div>
      <div class="card">
        <div id="qrOutput"></div>
        <div style="margin-top: 10px;" id="totpCodeQR"></div>
        <div style="margin-top: 10px;" id="teamNameDisplay"></div>
        <div style="margin-top: 10px;" id="teamAccessDisplay"></div>
        <div style="margin-top: 10px;" id="teamExpiryDisplay"></div>
      </div>
    </div>
  </div>



</div>

<div id="alertModal" class="carrypass-modal">
  <div class="carrypass-modal-content">
    <span class="close" aria-label="Close">&times;</span>
    <p id="alertModalMessage">Modal message here.</p>
  </div>
</div>

<!-- Modal for Access Code -->
<div id="accessCodeModal" class="carrypass-modal">
  <div class="carrypass-modal-content">
    <h4>Enter the access code for this team:</h4>
    <input type="text" id="accessCodeInput" placeholder="Enter access code">
    <div class="modal-footer">
      <button id="submitAccessCode" class="btn">Submit</button>
      <button class="btn" onclick="closeModalAccess()">Close</button>
    </div>
  </div>
</div>

<!-- Modal for TOTP Code -->
<div id="totpCodeModal" class="carrypass-modal">
  <div class="carrypass-modal-content">
    <h4>Enter the current TOTP code for this team:</h4>
    <input type="text" id="totpCodeInput" placeholder="Enter TOTP code" maxlength="6">
    <div class="modal-footer">
      <button id="submitTOTPCode" class="btn">Submit</button>
      <button class="btn" onclick="closeModalTotp()">Close</button>
    </div>
  </div>
</div>

<!-- Modal for PASS Code -->
<div id="passCodeModal" class="carrypass-modal-login">
  <div class="carrypass-modal-login-content">
    <h4>LOGIN</h4>
    <h4>Enter the passcode for your app</h4>
    <input type="text" id="passCodeInput" placeholder="Enter passcode (min. 6 char)">
    <p id="errorMessage" style="color: red;"></p>
    <div class="modal-footer">
      <button id="submitPassCode" class="btn">Submit</button>
    </div>
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p>&copy; 2022-2025 CarryPass. Built for privacy. All rights reserved.</p>
  </div>
</footer>
<script>
  window.addEventListener('load', () => {
  lucide.createIcons();
});
</script>
<script src="qrcode.min.js"></script>
<script src="carrypass-admin.min.js"></script>

</body>
</html>
