<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>CarryPass</title>
    
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src data: 'self'; style-src 'self' 'unsafe-inline'; object-src 'none'; frame-src 'none'; script-src 'self' 'wasm-unsafe-eval'">
    <script src="argon2-bundled.min.js"></script>
    <!-- Viewport and Progressive Web App Basics -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#1E003B">
    <meta name="application-name" content="CarryPass">
    
    <!-- Apple-specific Meta -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="CarryPass">
    <meta name="format-detection" content="telephone=no">
    
    <!-- Windows -->
    <meta name="msapplication-TileColor" content="#FFD43B">
    
    <!-- Icons and Manifest -->
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="CarryPass" />
    <link rel="manifest" href="/site.webmanifest" />
    
    <!-- iOS Splash Screens -->
    <link rel="apple-touch-startup-image" href="/splash-640x1136.png" media="(device-width: 320px) and (device-height: 568px)">
    <link rel="apple-touch-startup-image" href="/splash-750x1334.png" media="(device-width: 375px) and (device-height: 667px)">
    <link rel="apple-touch-startup-image" href="/splash-1125x2436.png" media="(device-width: 375px) and (device-height: 812px)">
    <link rel="apple-touch-startup-image" href="/splash-1242x2688.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="/splash-1536x2048.png" media="(min-device-width: 768px) and (max-device-width: 1024px)">
    <link rel="apple-touch-startup-image" href="/splash-2048x2732.png" media="(min-device-width: 1024px) and (max-device-width: 1366px)">
    
    <!-- Styles and Icons -->
    <link rel="stylesheet" href="carrypass-theme.css">
    <script src="lucide.min.js"></script>
    
    <!-- Basic Screen Style -->
    <style>
        .screen { display: none; min-height: 100vh; }
        .screen.active { display: block; }
        .hidden { display: none; }
        .team-card, .member-card, .credential-card { border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; border-radius: 8px; }
        .pending { color: #d9534f; font-weight: bold; }
        .inline-edit { background: #f9f9f9; padding: 8px; border-radius: 6px; margin-top: 5px; }
        .icon-button { background: none; border: none; cursor: pointer; margin-left: 5px; }
    </style>
</head>
      
<body>

  <!-- REGISTRATION VIEW -->
  <div id="registrationView" class="screen">
    <a href="" class="logo-link">
      <img src="carrypass-gold-transparent.png" alt="CarryPass logo" class="logo-img">
    </a>
    <div class="container" style="margin-top: 4rem;">
      <form id="registrationForm" class="grid split">
        <div class="column-left">
          <h2>Start Using CarryPass</h2>
          <div class="input-group">
            <input type="password" id="passCodeInputRegister" autocomplete="off" class="form-control" placeholder="Appication ID" required>
            <button id="passCodeInputRegisterShow" type="button" class="btn secondary-outline" name="passCodeInputRegister">Show</button>
          </div>
          <button id="submitPassCodeRegister" type="button" class="btn primary">Open My App</button>
          <p id="errorMessageRegister" style="color: #d9534f;"></p>
            <div class="container">
              <p class="qr-image-front">Try me on your mobile.</p>
              <img src="carrypass-qr-code.svg" alt="QR Code to CarryPass" class="qr-image-front">
            </div>
        </div>
        <div style="margin-top: 2rem;">
          <p><strong>Choose an ID</strong> — this can be a nickname, passphrase, or PIN — and start exploring CarryPass right away.<br><b>Important:</b> This ID is not recoverable. If you forget it, all application settings will be permanently lost. </p>
          <p style="margin-top: 3rem;">
            <strong>CarryPass</strong> is a <strong>privacy-first</strong>, <strong>deterministic password manager</strong> and <strong>credential distribution tool</strong> that runs entirely in your browser — <strong>no storage</strong>, <strong>no syncing</strong>, just your browser.<br>
          </p>
          <div class="info-card">
            <button type="button" id="toggleInfoWhatisit" class="info-toggle"> Want to know more?<span id="infoArrow" class="arrow">▼</span></button>
            <div class="info-content" id="infoContent">
              <ul>
                <li>Privacy-first <br>password manager – <a href="carrypass-privacy-policy.html" class="lang-link active">PRIVACY&nbsp;POLICY</a></li>
                <li>Password management <br>and credential distribution – <a href="carrypass-user-manual.html" class="lang-link active">USER&nbsp;MANUAL</a></li>
                <li>Unparalleled privacy <br>and robust security – <a href="carrypass-whitepaper.html" class="lang-link active">PUBLIC&nbsp;WHITEPAPER</a></li>
                <li>Free for individual use – <a href="carrypass-marketing_en.html" class="lang-link active">PURCHASE&nbsp;OPTIONS</a></li>
                <li>Demo version limitations – <a href="carrypass-disclaimer.html" class="lang-link active">DISCLAIMER</a></li>
              </ul>
            </div>
          </div>
        </div>
      </form>
    </div>
    <footer class="footer">
      &copy; 2022–2025 CarryPass. Built for<a href="carrypass-privacy-policy.html" class="lang-link active">Privacy</a></li> | created by Rácz Zoltán | hosted by GitHub Pages | domain provider GoDaddy
    </footer>
  </div>

  <!-- LOGIN VIEW -->
  <div id="loginView" class="screen">
    <a href="" class="logo-link">
      <img src="carrypass-gold-transparent.png" alt="CarryPass logo" class="logo-img">
    </a>
    <div class="container" style="margin-top: 4rem;">
      <form id="loginForm" class="grid split">
        <div style="margin-top: 1rem;" class="column-left">
          <h2>Welcome back!</h2>
          <div class="input-group">
            <input type="password" id="passCodeInput" autocomplete="off" class="form-control" placeholder="Application ID" required>
            <button id="passCodeInputShow" type="button" class="btn secondary-outline" name="passCodeInput">Show</button>
          </div>
          <button id="submitPassCode" type="button" class="btn primary">Unlock</button>
          <p id="errorMessageLogin" style="color: #d9534f;"></p>
          <div class="container">
            <p class="qr-image-front">Try me on your mobile.</p>
            <img src="carrypass-qr-code.svg" alt="QR Code to CarryPass" class="qr-image-front">
          </div>
        </div>
        <div>
          <p style="margin-top: 6rem;"><strong>Unlock with your application ID.</strong></p>
          <p>If you've lost it, you'll need to reset the app and start over.</p>
          <p style="margin-top: 4rem;">
            <strong>CarryPass</strong> is a <strong>privacy-first</strong>, <strong>deterministic password manager</strong> and <strong>credential distribution tool</strong> that runs entirely in your browser — <strong>no storage</strong>, <strong>no syncing</strong>, just your browser.<br>
          </p>
          <div class="info-card" style="margin-top: 1rem;">
            <button type="button" id="toggleInfoWhatisitEntry" class="info-toggle"> Want to know more?<span id="infoArrowEntry" class="arrow">▼</span></button>
            <div class="info-content" id="infoContentEntry">
              <ul>
                <li>Privacy-first <br>password manager – <a href="carrypass-privacy-policy.html" class="lang-link active">PRIVACY&nbsp;POLICY</a></li>
                <li>Password management <br>and credential distribution – <a href="carrypass-user-manual.html" class="lang-link active">USER&nbsp;MANUAL</a></li>
                <li>Unparalleled privacy <br>and robust security – <a href="carrypass-whitepaper.html" class="lang-link active">PUBLIC&nbsp;WHITEPAPER</a></li>
                <li>Free for individual use – <a href="carrypass-marketing_en.html" class="lang-link active">PURCHASE&nbsp;OPTIONS</a></li>
                <li>Demo version limitations – <a href="carrypass-disclaimer.html" class="lang-link active">DISCLAIMER</a></li>
                <li>First CarryPass password generator - <a href="legacy-password-generator.html" class="lang-link active">LEGACY&nbsp;VERSION</a></li>
              </ul>
            </div>
          </div>  
          <button type="button" id="resetAppButton" class="btn outline-delete" style="margin-top: 2rem;">Reset Application</button>
        </div>
      </form>
    </div>
    <footer class="footer">
      &copy; 2022–2025 CarryPass. Built for<a href="carrypass-privacy-policy.html" class="lang-link active">Privacy</a></li> | created by Rácz Zoltán | hosted by GitHub Pages | domain provider GoDaddy
    </footer>
  </div>

  <!-- Upload Admin Config Screen -->
  <div id="uploadAdminConfigScreen" class="screen" style="display: none">
    <a href="#appView" class="logo-link">
      <img src="carrypass-gold-transparent.png" alt="CarryPass logo" class="logo-img">
    </a>
    <div class="lang-toggle">
      <a href="" data-section="appView" class="lang-link">PASSWORDS</a>
      |
      <a href="" data-section="memberUnlockScreen" class="lang-link active">TEAMS</a>
      |
      <a href="" class="lang-link"><i id="adminBootstrapLogout" data-lucide="log-out"></i></span></a>
    </div>
    <div class="container" style="margin-top: 4rem;">
      <form id="adminConfigForm" class="grid split">
        <div>
          <p>No vault detected. Upload your Admin Config to proceed.</p>
              <label for="adminFileInput">Choose admin config file</label>
              <div class="input-group">
                  <input type="text" class="form-control" id="adminFileInputText" disabled placeholder="Choose file" />
                  <div class="input-group-append">
                      <button class="btn primary" type="button" id="adminFileButton">Browse</button>
                  </div>
                  <input type="file" class="custom-file-input" accept=".json" id="adminFileInput">
              </div>
          <br><br>
          <button id="uploadConfigToMemberPanel" type="button" class="btn secondary">Back</button>
        </div>
        <div>
          <p>No vault detected. Upload your Admin Config to proceed.</p>
        </div>
      </form>
    </div>
    <footer class="footer">
      &copy; 2022–2025 CarryPass. Built for<a href="carrypass-privacy-policy.html" class="lang-link active">Privacy</a></li>
    </footer>
  </div>

  <!-- Admin Vault Viewer Panel -->
  <div id="adminVaultEditorPanel" class="screen" style="display: none">
    <a href="#appView" class="logo-link">
      <img src="carrypass-gold-transparent.png" alt="CarryPass logo" class="logo-img">
    </a>
    <div class="lang-toggle">
      <a href="" data-section="appView" class="lang-link">PASSWORDS</a>
      |
      <a href="" data-section="memberUnlockPanel" class="lang-link active">TEAMS</a>
      |
      <a href="" class="lang-link"><i id="adminEditorLoginLogout" data-lucide="log-out"></i></span></a>
    </div>
    <div class="container" style="margin-top: 4rem;">
      <form id="adminVaultEditorForm" class="grid split">
        <div>
          <h2>Admin Vault Editor Access</h2>
          <div class="input-group">
            <input type="password" id="adminPasswordEditorInput" placeholder="Admin Vault Password">
          <button id="adminPasswordEditorInputToggle" type="button" name="adminPasswordEditorInput" class="btn secondary-outline">Show</button>
          </div>
          <br><br>
          <input id="adminEditorTOTPInput" type="text" placeholder="2FA (not required in demo)" maxlength="6">
          <br><br>
          <div class="input-group">
          <button type="button" class="btn strong" id="handleCompleteAdminVault" style="margin-right: 0.5rem;">Unlock&nbsp;Admin&nbsp;Vault</button>
          <div class="input-group" style="margin-left: auto;">
              <input type="text" class="form-control" id="adminEditFileInputText" disabled placeholder="Upload vault file" />
              <div class="input-group-append">
                  <button class="btn primary" type="button" id="adminEditFileButton">Browse</button>
              </div>
              <input type="file" class="custom-file-input" accept=".json" id="adminEditFileInput">
          </div>
          </div>
        </div>
        <div>
          <p style="margin-top: 2rem;">This is the admin unlock & edit panel - it is used for editing the complete vault, when there is a team vault already set up.</p>
          <h3>Demo Admin Password</h3>
          <p>6bbLpO1-flCP1Oz-VQIRK04-1p4pNjj-Z52z13u-Bm6iZ21-f</p>
          <div style="margin-top: 3rem; margin-left: auto;">
          <button id="adminToMemberUnlock" type="button" class="btn secondary">Back to Team Access Panel</button>
          </div>
        </div>
      </form>
    </div>
    <footer class="footer">
      &copy; 2022–2025 CarryPass. Built for<a href="carrypass-privacy-policy.html" class="lang-link active">Privacy</a></li>
    </footer>
  </div>

  <!-- Admin Unlock Panel -->
  <div id="adminUnlockPanel" class="screen" style="display: none">
    <a href="#appView" class="logo-link">
      <img src="carrypass-gold-transparent.png" alt="CarryPass logo" class="logo-img">
    </a>
    <div class="lang-toggle">
      <a href="" data-section="appView" class="lang-link">PASSWORDS</a>
      |
      <a href="" data-section="memberUnlockPanel" class="lang-link active">TEAMS</a>
      |
      <a href="" class="lang-link"><i id="adminSetupLogout" data-lucide="log-out"></i></span></a>
    </div>
    <div class="container" style="margin-top: 4rem;">
      <form id="adminUnlockForm" class="grid split">
        <div>
          <h2>Admin Vault Unlock</h2>
          <input id="adminAccessInput" placeholder="Access Settings">
          <div class="input-group">
            <input type="password" id="adminPasswordInput" placeholder="Master Password">
          <button id="adminPasswordInputToggle" type="button" name="adminPasswordInput" class="btn secondary-outline">Show</button>
          </div>
          <br><br>
          <input id="adminTOTPInput" type="text" placeholder="2FA Code" maxlength="6">
          <br><br>
          <button type="button" id="firstUnlockAdminVault" class="btn strong">Unlock Admin Vault</button>
          <button type="button" id="backToTeamsPanel" class="btn secondary">Back</button>
        </div>
        <div>
          <p>This is the admin unlock panel - used for initial setup - bootstrapping the app.</p>
        </div>
      </form>
    </div>
    <footer class="footer">
      &copy; 2022–2025 CarryPass. Built for<a href="carrypass-privacy-policy.html" class="lang-link active">Privacy</a></li> 
    </footer>
  </div>

  <!-- MEMBER VAULT CONTENT -->
  <div id="memberPanel" class="screen" style="display: none">
    <a href="#appView" class="logo-link">
      <img src="carrypass-gold-transparent.png" alt="CarryPass logo" class="logo-img">
    </a>
    <div class="lang-toggle">
      <a href="" data-section="appView" class="lang-link">PASSWORDS</a>
      |
      <a href="" data-section="memberUnlockPanel" class="lang-link active">TEAMS</a>
      |
      <a href="" class="lang-link"><i id="memberVaultLogout" data-lucide="log-out"></i></span></a>
    </div>
    <div class="container" style="margin-top: 4rem;">
      <form id="memberVaultForm" class="grid split">
        <div>
          <button type="button" class="btn secondary" style="margin-bottom: 2rem;" id="logoutMemberFromVault">
            Clear Vault&nbsp;&nbsp;<i data-lucide="database-zap"></i>
          </button>
          <div class="logout-mobile" style="margin-left: auto;"><p style="margin-bottom: 1rem;">You can see only the teams that have been assigned to you. Teams without credentials also appear if team is already assigned.</p></div>
          <div id="memberVaultContent1"></div>
        </div>
        <div>
          <div class="logout-desktop" style="margin-left: auto;"><p style="margin-bottom: 1rem;">You can see only the teams that have been assigned to you. Teams without credentials also appear if team is already assigned.</p></div>
          <div id="memberVaultContent2"></div>
        </div>
      </form>
    </div>
    <footer class="footer">
      &copy; 2022–2025 CarryPass. Built for<a href="carrypass-privacy-policy.html" class="lang-link active">Privacy</a></li> 
    </footer>
  </div>


  <!-- Member Unlock Panel -->
  <div id="memberUnlockPanel" class="screen" style="display:none">
    <a href="#appView" class="logo-link">
      <img src="carrypass-gold-transparent.png" alt="CarryPass logo" class="logo-img">
    </a>
    <div class="lang-toggle">
      <a href="" data-section="appView" class="lang-link">PASSWORDS</a>
      |
      <a href="" data-section="memberUnlockPanel" class="lang-link active">TEAMS</a>
      |
      <a href="" class="lang-link"><i id="memberPanelLogout" data-lucide="log-out"></i></span></a>
    </div>
    <div class="container" style="margin-top: 4rem;">
      <form id="memberUnlockForm" class="grid split">
        <div>
          <h2>Team Member Access</h2>
          <input id="memberId" placeholder="Member ID" type="text">
          <br><br>
          <div class="input-group">
            <input type="password" id="memberPassword" placeholder="Member Access Password">
          <button id="memberPasswordToggle" type="button" name="memberPassword" class="btn secondary-outline">Show</button>
          </div>
          <br><br>
          <input id="memberTOTPInput" type="text" placeholder="2FA (not required in demo)" maxlength="6">
          <br><br>
          <div class="input-group">
          <button id="memberVaultImportButton" type="button" class="btn strong" style="margin-right: 0.5rem;">Access&nbsp;Vault</button>
          <div class="input-group" style="margin-left: auto;">
              <input type="text" class="form-control" id="memberGappedFileInputText" disabled placeholder="Upload vault file" />
              <div class="input-group-append">
                  <button class="btn primary" type="button" id="memberGappedFileButton">Browse</button>
              </div>
              <input type="file" class="custom-file-input" accept=".json" id="memberGappedFileInput">
          </div>
          </div>
        </div>
        <div>
          <h3>Demo Member ID</h3>
          <p>fs4upetr</p>
          <h3>Demo Member Access Password</h3>
          <p>qu67y9ha5OVtxbEAyThB6y5dPDARCPPFvXY94GBNRic</p>
          <h3>Demo TOTP QR code</h3>
          <img src="member_finalize_qr.png" alt="Demo onboarding QR code" class="qr-image" style="margin-bottom: 1rem;">
          <p>Unlock the admin vault to manage teams, members, credentials and assignments.</p>
          <button id="onAdminEntryCheck" type="button" class="btn secondary" style="margin-bottom: 2rem;">Unlock Admin Vault</button>
        </div>
      </form>
    </div>
    <footer class="footer">
      &copy; 2022–2025 CarryPass. Built for<a href="carrypass-privacy-policy.html" class="lang-link active">Privacy</a></li> 
    </footer>
  </div>

    <!-- Admin Control Panel -->
    <div id="adminPanel" class="screen" style="display:none">
        <a href="#appView" class="logo-link">
            <img src="carrypass-gold-transparent.png" alt="CarryPass logo" class="logo-img">
        </a>
          <div class="lang-toggle">
            <a href="" data-section="appView" class="lang-link">PASSWORDS</a>
            |
            <a href="" data-section="memberUnlockPanel" class="lang-link active">TEAMS</a>
            |
            <a href="" class="lang-link"><i id="adminEditViewLogout" data-lucide="log-out"></i></span></a>
          </div>
        <div class="container" style="margin-top: 4rem;">
          <form id="adminFullForm" class="grid split">
            <div class="desktop-margin-right">
              <div class="logout-mobile" style="margin-left: auto;">
                <button type="button" class="btn secondary" id="adminPasswordGenerator1" style="margin-right: 1rem;">
                  Generate Password&nbsp;&nbsp;<i data-lucide="shield-user"></i>
                </button>
                <button type="button" class="btn secondary" id="logoutAdminEditMobile">
                  Clear Vault&nbsp;&nbsp;<i data-lucide="database-zap"></i>
                </button>
              </div>
                <div id="vaultInfoSection" class="admin-section">
                    <p><strong>Vault Expiration:</strong> <span id="vaultExpirationDisplay">Unknown</span></p>
                </div>
                  <!-- Teams -->
                <div id="teamsSection" class="admin-section" style="margin-top: 2.6rem;">
                    <h3>Teams&nbsp;&nbsp;<i data-lucide="group"></i></h3>
                    <input type="text" id="teamSearchInput" placeholder="Search Teams...">
                    <div id="teamsList" class="compact-list"></div>
                    <button type="button" class="btn outline-gold" id="createTeamModal"> Create New Team</button>
                </div>
                    <!-- Credentials -->
                <div id="credentialsSection" class="admin-section" style="margin-top: 2rem;">
                    <h3>Credentials&nbsp;&nbsp;<i data-lucide="globe-lock"></i></h3>
                    <div class="input-group">
                    <input type="text" id="credentialSearchInput" placeholder="Search by Title...">
                    <input type="text" id="credentialSearchByTeam" placeholder="Search by Team...">
                    </div>
                    <div id="credentialsList"></div>
                    <button id="addCredentialButton" type="button" class="btn outline-gold"> Add New Credential</button>
                </div>
            </div>
            <div class="desktop-margin-left">
                <!-- Members -->
                <div class="logout-desktop" style="margin-left: auto;">
                  <button type="button" class="btn secondary" id="adminPasswordGenerator2" style="margin-right: 3rem;">
                    Generate Password&nbsp;&nbsp;<i data-lucide="shield-user"></i>
                  </button>
                  <button type="button" class="btn secondary" id="logoutAdminEditDesktop">
                    Clear Vault&nbsp;&nbsp;<i data-lucide="database-zap"></i>
                  </button>
                </div>
                <div id="membersSection" class="admin-section responsive-margin-top" style="margin-top: 2rem;">
                    <h3>Members&nbsp;&nbsp;<i data-lucide="user"></i></h3>
                    <div id="hiddenQr" class="input-group" style="display: none; margin-bottom: 1rem;">
                    <div id="qrOutput"></div>
                    <button id="deleteQrOutput" type="button" class="btn outline-delete" style="margin-top: 1rem;"> Delete QR</button>
                    </div>
                    <div class="input-group">
                    <input type="text" id="memberSearchInput" placeholder="Search Members...">
                    <button type="button" id="toggleExpirySort" class="btn outline-secondary" data-active="false" style="margin-left: 1rem;">
                      Sort by Expiry
                    </button>
                    </div>
                    <div id="membersList" class="compact-list"></div>
                    <button id="createMemberShow" type="button" class="btn outline-gold"> Create New Member</button>
                </div>
                <!-- ===== Assignments Management ===== -->
                <div id="assignmentsSection" class="admin-section" style="margin-top: 2rem;">
                    <h3>Assignments&nbsp;&nbsp;<i data-lucide="share-2"></i></h3>
                    <div class="input-group">
                    <input type="text" id="assignmentSearchInput" placeholder="Search by Memeber...">
                    <input type="text" id="assignmentSearchByTeam" placeholder="Search by Team...">
                    </div>
                    <div id="assignmentsList" class="compact-list">
                    <div class="assignment-card">
                        <b>{{ member.name }}</b>
                        <div class="assigned-teams">
                        {{#each assignedTeams}}
                            <span class="assigned-team-item">
                            {{ this.name }}
                            <button id="removeTeamMemberAssignment" class="icon-button outline-delete">
                                <i data-lucide="square-arrow-out-up-right" style="color: #1E003B;"></i>
                            </button>
                            </span>
                        {{/each}}
                        </div>
                    </div>
                    </div> 
                </div>
                <!-- Vault Export -->
              <div id="exportVaultSection" class="admin-section" style="margin-top: 3rem;">
                  <button id="vaultExportModalShow" type="button" class="btn strong">Export Vault&nbsp;&nbsp;<i data-lucide="folder-symlink"></i></button>
                  <div id="vaultExportFeedback"></div>
              </div>
            </div>
          </form>
        </div>
        <footer class="footer">
      &copy; 2022–2025 CarryPass. Built for<a href="carrypass-privacy-policy.html" class="lang-link active">Privacy</a></li>
        </footer>
    </div>

  <!-- MAIN APP VIEW -->
  <div id="appView" class="screen">
    <a href="#" class="logo-link">
      <img src="carrypass-gold-transparent.png" alt="CarryPass logo" class="logo-img">
    </a>
    <div class="lang-toggle">
      <a href="" data-section="appView" class="lang-link active">PASSWORDS</a>
      |
      <a href="" data-section="memberUnlockPanel" class="lang-link">TEAMS</a>
      |
      <a href="" class="lang-link"><i id="appViewLogout" data-lucide="log-out"></i></span></a>
    </div>

    <div class="container" style="margin-top: 4rem;">
      <form id="keyGeneratorForm" class="grid split">
        <div class="column-left">
          <div class="input-group">
          <button type="button" id="toggleSavedServices" class="btn secondary-outline" style="margin-bottom: 2rem;">Store</button>
          <div class="label-tooltip-wrapper tooltip-anchor">
            <label for="toggleSavedServices">
              <div class="label-tooltip-reset">
              <button type="button" class="info-icon-wrapper" tabindex="0" aria-describedby="tooltip-store">
                <i data-lucide="info" class="lucide-icon info-icon"></i>
              </button>
              </div>
            </label>
            <div class="tooltip" id="tooltip-store" role="tooltip">
              Lists your custom password generation settings. Default settings automatically adjust when a service is chosen from this list.
            </div>
          </div>
          <button type="button" id="exportSettingsButton" class="btn secondary-outline" style="margin-bottom: 2rem; margin-left: auto;">Export</button>
          <div class="label-tooltip-wrapper tooltip-anchor">
            <label for="exportSettingsButton">
              <div class="label-tooltip-reset">
              <button type="button" class="info-icon-wrapper" tabindex="0" aria-describedby="tooltip-export">
                <i data-lucide="info" class="lucide-icon info-icon"></i>
              </button>
              </div>
            </label>
            <div class="tooltip" id="tooltip-export" role="tooltip">
              Export your stored settings in an encrypted file to use on a new device or to prevent loss if browser's local storage is cleared.
            </div>
          </div>
          <button type="button" id="importSettingsButton" class="btn secondary-outline" style="margin-bottom: 2rem; margin-left: auto;">Import</button>
          <div class="label-tooltip-wrapper tooltip-anchor">
            <label for="importSettingsButton">
              <div class="label-tooltip-reset">
              <button type="button" class="info-icon-wrapper" tabindex="0" aria-describedby="tooltip-import">
                <i data-lucide="info" class="lucide-icon info-icon"></i>
              </button>
              </div>
            </label>
            <div class="tooltip" id="tooltip-import" role="tooltip">
              Import encrypted settings. Use same password as at export.
            </div>
          </div>
          </div>
          <div id="savedServicesPanel" class="saved-services-panel">
            <input type="text" id="savedServicesSearch" placeholder="Search saved services..." style="width: 100%; margin-bottom: 0.5rem;">
            <ul id="savedServicesList"></ul>
          </div>
          <p></p>
          <div class="label-tooltip-wrapper tooltip-anchor">
            <label for="webAddress">
              Service
              <button type="button" class="info-icon-wrapper" tabindex="0" aria-describedby="tooltip-service">
                <i data-lucide="info" class="lucide-icon info-icon"></i>
              </button>
            </label>
            <div class="tooltip" id="tooltip-service" role="tooltip">
              The site or app name that you want to access. The service name affects password generation consistency.
            </div>
          </div>
          <input type="text" id="webAddress" autocomplete="off" name="webAddress" class="form-control" placeholder="example.com" required>
          <div class="label-tooltip-wrapper tooltip-anchor">
            <label for="password">
              Master Password
              <button type="button" class="info-icon-wrapper" tabindex="0" aria-describedby="tooltip-password">
                <i data-lucide="info" class="lucide-icon info-icon"></i>
              </button>
            </label>
            <div class="tooltip" id="tooltip-password" role="tooltip">
               Your main password. Never shared or stored, long and complex. Used to derive secure passwords. 
            </div>
          </div>
          <div class="input-group">
            <input type="password" id="password" name="password" autocomplete="off" class="form-control" placeholder="Your secret password" disabled required>
            <button id="masterPass" type="button" class="btn secondary-outline" name="password">Show</button>
          </div>
          <div style="align-items: center; display: flex; margin-bottom: 0.5rem;">
          <button id="collectInput" type="button" class="btn strong" style="margin-top: 1rem;font-weight: 500;">GET PASSWORD</button>
        
          <div id="slider1" class="custom-slider-container" style="margin-top: auto; margin-left: auto;">
              <div id="btn1" class="custom-slider-ball">
              <i data-lucide="sliders-horizontal" class="slider-icon"></i> 
              </div>
              <div id="dot" class="dot-signal"></div>
          </div>
          </div>
          <p id="generationStatus" style="visibility: hidden; color: #1E003B; margin-left: 1rem;">
            Generating passwords<span class="dot-loader">
              <span>.</span><span>.</span><span>.</span>
            </span>
          </p>
          <div id="settings" class="smooth-toggle">

            <div class="toggles">
            <div class="toggle-container">
                  <div class="label-tooltip-wrapper tooltip-anchor">
                    <div class="label-flex-wrapper">
                    <label for="toggle1" style="margin-right: auto;" class="label-with-icon">
                      Letters
                      <div class="label-tooltip-reset">
                      <button type="button" class="info-icon-wrapper" tabindex="0" aria-describedby="tooltip-separator">
                        <i data-lucide="info" class="lucide-icon info-icon"></i>
                      </button>
                      </div>
                    </label>
                    <div class="tooltip" id="tooltip-separator" role="tooltip">
                      These define what kind of characters are allowed in your generated password. Separator is for readability, also counts as symbol.
                    </div>
                    </div>
                  </div>   
              <input type="checkbox" id="toggle1" class="toggle">
            </div>
  
            <div class="toggle-container">
              <label for="toggle2">Numbers</label>
              <input type="checkbox" id="toggle2" class="toggle">
            </div>
            
            <div class="toggle-container">
              <label for="toggle3">Symbols</label>
              <input type="checkbox" id="toggle3" class="toggle">
            </div>
  
            <div class="toggle-container">
              <label for="toggle4">Separator</label>
              <input type="checkbox" id="toggle4" class="toggle">
            </div>  
            <input type="hidden" id="salt" name="salt" value="">          
          </div>
          <div class="input-group" style="margin-bottom: 1.5rem;">
              <div class="toggle-container">
                  <div class="label-tooltip-wrapper tooltip-anchor">
                    <div class="label-flex-wrapper">
                    <label for="length" style="margin-right: auto;" class="label-with-icon">
                      Length
                      <div class="label-tooltip-reset">
                      <button type="button" class="info-icon-wrapper" tabindex="0" aria-describedby="tooltip-length">
                        <i data-lucide="info" class="lucide-icon info-icon"></i>
                      </button>
                      </div>
                    </label>
                    <div class="tooltip" id="tooltip-length" role="tooltip">
                      Desired length of the generated password. More is stronger.
                    </div>
                    </div>
                  </div>
                  <input max="999" min="1" type="number" id="length" name="length" class="form-control" placeholder="" value="28" step="1" required>
              </div>
              <div class="toggle-container">
                  <div class="label-tooltip-wrapper tooltip-anchor">
                    <div class="label-flex-wrapper" style="text-align: left">
                    <label for="iterationCount" class="label-with-icon">
                      Security
                      <div class="label-tooltip-reset">
                      <button type="button" class="info-icon-wrapper" tabindex="0" aria-describedby="tooltip-iteration">
                        <i data-lucide="info" class="lucide-icon info-icon"></i>
                      </button>
                      </div>
                    </label>
                    <div class="tooltip" id="tooltip-iteration" role="tooltip">
                      Controls computation rounds and memory usage. Higher = more secure passwords, but slower generation.
                    </div>
                    </div>
                  </div>
                  <div class="input-group">
                    <input maxlength="5" max="99999" min="1" type="number" inputmode="numeric" pattern="\d*" id="iterationCount" name="iterationCount" class="form-control" value="100" step="1" placeholder="" required>
                    <!-- <button id="iterCount" type="button" class="btn secondary-outline" name="iterationCount">Show</button> -->
                  </div>
              </div>
              <div class="toggle-container" style="margin-left: 0.5rem;">
                  <div class="label-tooltip-wrapper tooltip-anchor">
                    <div class="label-flex-wrapper">
                    <div class="input-group">
              
                    <label for="slider2" class="label-with-icon">Store&nbsp;Settings
                      <div class="label-tooltip-reset">
                      <button type="button" class="info-icon-wrapper" tabindex="0" aria-describedby="tooltip-storesettings">
                        <i data-lucide="info" class="lucide-icon info-icon"></i>
                      </button>
                      </div>
                    </label>
                    </div>
                    <div class="tooltip" id="tooltip-storesettings" role="tooltip">
                      Toggle 'Store Settings' before password generation and your custom settings are saved to local storage.
                    </div>
                    </div>
                  </div>
                <div id="slider2" class="custom-slider-container" >
                <div id="btn2" class="custom-slider-ball">
                <i data-lucide="archive" class="slider-icon"></i> 
                </div>
                </div>
              </div>           
          </div>
        </div> 
        </div>
        <div class="column-right"> 
          <div id="generatedPassword" class="smooth-toggle">
            <label for="mainPassword">Derived Password</label>
            <label id="createdfor" class="form-label"></label>
            <div class="input-group">
              <input type="password" id="mainPassword" class="form-control input-pwd" readonly>
              <button id="mainButton" type="button" class="btn secondary-outline" name="mainPassword">Show</button>
              <button data-password-id="mainCopy" type="button" class="btn outline-gold" name="mainPassword">Copy
              </button>
              <span id="copySuccessIcon-mainCopy" class="icon" style="display: none;">         
              </span>
            </div>
            <div id="passwordStrengthContainer">
              <div id="passwordStrengthBar" class=""></div>
              <span id="passwordStrengthText"></span>
              <span id="entropyText"></span>
            </div>
            <div class="label-tooltip-wrapper tooltip-anchor">
              <label for="username">
                Username
                <button type="button" class="info-icon-wrapper" tabindex="0" aria-describedby="tooltip-username">
                  <i data-lucide="info" class="lucide-icon info-icon"></i>
                </button>
              </label>
              <div class="tooltip" id="tooltip-username" role="tooltip">
                This is just something extra, if a service requires it.
              </div>
            </div>
            <div class="input-group">
              <input type="password" id="username" class="form-control" readonly>
              <button id="sixthButton" type="button" class="btn secondary-outline" name="username">Show</button>
              <button data-password-id="usernameCopy" type="button" class="btn outline-gold" name="username">Copy</button>
              <span id="copySuccessIcon-usernameCopy" class="icon" style="display: none;"></span>
            </div>

            <div class="input-group">
              <p id="clearGeneratedPasswords"><i data-lucide="trash-2" style="color: #842029;"></i></p>
              <p id="displayAdditional" style="margin-left: auto;"><i data-lucide="list-collapse" style="color: #1E003B;"></i></p>
            </div>                                  
          </div>
          <div id="additionalPasswords" class="smooth-toggle">
            <div class="label-tooltip-wrapper tooltip-anchor">
              <div class="label-flex-wrapper">
              <label for="supplementaryfive" style="margin-right: auto;" class="label-with-icon">
                Additional passwords
                <div class="label-tooltip-reset">
                <button type="button" class="info-icon-wrapper" tabindex="0" aria-describedby="tooltip-additional">
                  <i data-lucide="info" class="lucide-icon info-icon"></i>
                </button>
                </div>
              </label>
              <div class="tooltip" id="tooltip-additional" role="tooltip">
                Additional passwords allow for password rotation if a service requires it.
              </div>
              </div>
            </div>
            <div id="extraPasswords">
              <div class="input-group"><input type="password" id="supplementaryone" class="form-control" readonly>
              <button type="button" id="firstButton" class="btn secondary-outline" name="supplementaryone">Show</button>
              <button data-password-id="extra1Copy" type="button" class="btn outline-gold" name="supplementaryone">Copy</button>
              <span id="copySuccessIcon-extra1Copy" class="icon" style="display: none;"></span></div>
    
              <div class="input-group"><input type="password" id="supplementarytwo" class="form-control" readonly>
              <button type="button" id="secondButton" class="btn secondary-outline" name="supplementarytwo">Show</button>
              <button data-password-id="extra2Copy" type="button" class="btn outline-gold" name="supplementarytwo">Copy</button>
              <span id="copySuccessIcon-extra2Copy" class="icon" style="display: none;"></span></div>
    
              <div class="input-group"><input type="password" id="supplementarythree" class="form-control" readonly>
              <button type="button" id="thirdButton" class="btn secondary-outline" name="supplementarythree">Show</button>
              <button data-password-id="extra3Copy" type="button" class="btn outline-gold" name="supplementarythree">Copy</button>
              <span id="copySuccessIcon-extra3Copy" class="icon" style="display: none;"></span></div>
    
              <div class="input-group"><input type="password" id="supplementaryfour" class="form-control" readonly>
              <button type="button" id="fourthButton" class="btn secondary-outline" name="supplementaryfour">Show</button>
              <button data-password-id="extra4Copy" type="button" class="btn outline-gold" name="supplementaryfour">Copy</button>
              <span id="copySuccessIcon-extra4Copy" class="icon" style="display: none;"></span></div>
    
              <div class="input-group"><input type="password" id="supplementaryfive" class="form-control" readonly>
              <button type="button" id="fifthButton" class="btn secondary-outline" name="supplementaryfive">Show</button>
              <button data-password-id="extra5Copy" type="button" class="btn outline-gold" name="supplementaryfive">Copy</button>
              <span id="copySuccessIcon-extra5Copy" class="icon" style="display: none;"></span></div>
            </div>
            </div> 
        </div>
      </form>
    </div>

    <footer class="footer">
      &copy; 2022-2025 CarryPass. Built for<a href="carrypass-privacy-policy.html" class="lang-link active">Privacy</a></li> 
    </footer>
  </div>
  <div id="alertModal" class="modal-confirm hidden">
    <div class="modal-confirm-content">
      <h3 id="alertMessage">Notice</h3>
      <div class="modal-confirm-buttons">
        <button id="alertOkBtn">OK</button>
      </div>
    </div>
  </div>
  <div id="alertModalAlert" class="carrypass-modal">
    <div class="carrypass-modal-content">
      <span class="close" aria-label="Close">&times;</span>
      <p id="alertModalMessage"></p>
    </div>
  </div>
  <!-- Export/Import Passcode Modal -->
  <div id="exportImportModal" class="modal hidden">
    <div class="modal-content">
      <h4 id="exportImportModalTitle">Enter Passcode</h4>
      <input type="password" id="exportImportModalInput" placeholder="" />
      <div id="exportImportModalError" class="modal-error hidden"></div>
      <br><br>
      <button type="button" class="btn secondary" id="exportImportModalCancel">Cancel</button>
      <button type="button" class="btn strong" style="margin-left: auto;" id="exportImportModalOK">OK</button>
    </div>
  </div>
<!-- ===== Create Team Modal ===== -->
  <div id="teamModal" class="modal hidden">
    <div class="modal-content">
      <h3>Create New Team</h3>
      <input type="text" id="newTeamName" placeholder="Team Name">
      <br><br>
      <button type="button" class="btn secondary" id="hideCreateTeamUnit">Cancel</button>
      <button type="button" class="btn strong" id="createTeamUnit">Create</button>
    </div>
  </div>
  

  <div id="createMemberModal" class="modal hidden">
    <div class="modal-content">
      <h3>Create New Member</h3>
      <input id="newMemberName" placeholder="Member Name" type="text" class="input-field">
      <br><br>    
        <button type="button" id="realCreateMemberHide" class="btn secondary">Cancel</button>
        <button type="button" id="realCreateMember" class="btn strong">Create</button>
    </div>
  </div>
  
  <!-- ===== Assign Member to Team Modal ===== -->
  
  <div id="assignMemberModal" class="modal hidden">
    <div class="modal-content">
      <h3>Assign Team to Member</h3>
      <p id="assignMemberNameLabel"></p>
      <div class="custom-dropdown" style="margin-bottom: 1rem;">
      <select id="assignTeamSelect" class="form-control"></select>
      </div>
      <br><br>
      <button type="button" class="btn secondary" id="cancelAssignButton">Cancel</button>
      <button type="button" class="btn strong" id="assignMemberButton">Assign</button>
    </div>
  </div>

<!-- ===== Add Credential Modal ===== -->
<div id="credentialModal" class="modal hidden">
  <div class="modal-content">
    <h3>Add New Credential</h3>
    <label>Team:
      <div class="custom-dropdown" style="margin-bottom: 1rem;">
      <select id="credentialTeam" class="form-control"></select>
      </div>
    </label>
    <label>Label:
      <input id="credentialLabel" placeholder="Credential Label (e.g. Website or Service)">
    </label>
    <label>Login URL:
      <input id="credentialURL" placeholder="Login URL (optional)">
    </label>
    <label>Username:
      <input id="credentialUsername" placeholder="Username">
    </label>
    <label>Password:
      <div class="input-group">
        <input type="password" id="credentialPassword" placeholder="Password">
        <button id="createPasswordToggle" type="button" name="credentialPassword" class="btn secondary-outline">Show</button>
      </div>
    </label>
    <label>Notes:
      <textarea id="credentialNotes" placeholder="Additional notes (optional)"></textarea>
    </label>
     <br><br>
    <button id="hideCredentialAddModal" type="button" class="btn secondary">Cancel</button>
    <button id="addCredentialByModal" type="button" class="btn strong">Save</button>
  </div>
</div>

<!-- ===== Edit Credential Modal ===== -->
  <div id="editCredentialModal" class="modal-edit hidden">
    <div class="modal-edit-content">
      <h3>Edit Credential</h3>
      <label>Label:
        <input type="text" id="editCredentialLabel" placeholder="Label">
      </label>
      <label>URL:
        <input type="text" id="editCredentialURL" placeholder="URL">
      </label>
      <label>Username:
        <input type="text" id="editCredentialUsername" placeholder="Username">
      </label>
      <label>Password:
        <div class="input-group">
          <input type="password" id="editCredentialPassword" placeholder="Password">
          <button id="editPasswordToggle" type="button" name="editCredentialPassword" class="btn secondary-outline">Show</button>
        </div>
      </label>
      <label>Notes:
        <textarea id="editCredentialNotes" placeholder="Additional notes (optional)"></textarea>
      </label>
      <br><br>
      <button id="cancelEditCredential" type="button" class="btn secondary">Cancel</button>
      <button id="saveEditCredential" type="button" class="btn strong">Save</button>
    </div>
  </div>
  
  <div id="confirmationModal" class="modal-confirm hidden">
    <div class="modal-confirm-content">
      <h3 id="confirmationMessage">Are you sure?</h3>
      <div class="modal-confirm-buttons">
        <button id="confirmYesBtn">Yes</button>
        <button id="confirmNoBtn">No</button>
      </div>
    </div>
  </div>

 <!-- ===== Member Finalization Step ===== -->
<div id="memberFinalizeModal" class="modal hidden">
    <div class="modal-content">
      <h3>Member Finalization</h3>
      <input id="memberFinalizeUsername" type="text" readonly>
      <div class="input-group">
        <input type="password" id="memberFinalizeMasterPassword" placeholder="Member Master Password">
      <button id="memberFinalizePasswordToggle" type="button" name="memberFinalizeMasterPassword" class="btn secondary-outline">Show</button>
      </div>
      <div id="passwordStrengthContainerMember">
        <div id="passwordStrengthBarMember" class=""></div>
        <span id="passwordStrengthTextMember"></span>
        <span id="entropyTextMember"></span>
      </div>
      <br><br>
      <button type="button" class="btn secondary" id="closeMemberFinalizeButton">Cancel</button>
      <button type="button" class="btn strong" id="memberFinalizeButton">Finalize Member</button>
    </div>
  </div>
  <!-- ===================== MODAL BACKDROP ===================== -->
<div id="modalBackdrop" class="modal-backdrop hidden"></div>


<!-- ===================== EXPORT VAULT MODAL ===================== -->
<div id="exportVaultModal" class="modal hidden">
  <div class="modal-content">
    <h3>Export Vault</h3>
    <label for="adminExportPassword">Admin Master Password</label>
    <div class="input-group">
      <input type="password" id="adminExportPassword" placeholder="Admin Master Password">
    <button id="adminExportPasswordToggle" type="button" name="adminExportPassword" class="btn secondary-outline">Show</button>
    </div>
    <div id="passwordStrengthContainerAdmin" style="margin-bottom: 2rem;">
      <div id="passwordStrengthBarAdmin" class=""></div>
      <span id="passwordStrengthTextAdmin"></span>
      <span id="entropyTextAdmin"></span>
    </div>
    <label for="vaultExpiry">Vault Expiration Date (optional)</label>
    <input type="date" id="vaultExpiry">
    <div id="vaultExportFeedback" class="feedback"></div>
    <br><br>
    <button type="button" class="btn secondary" id="cancelAdminExport">Cancel</button>
    <button type="button" class="btn strong" id="adminExportsVault">Export Vault</button>
  </div>
</div>
<!-- ===================== PASSWORD GENERATOR MODAL ===================== -->
<div id="adminPasswordGeneratorModal" class="modal hidden">
  <div class="modal-content">

    <label for="webAddressAdmin">Service</label>
    <input type="text" id="webAddressAdmin" class="form-control" autocomplete="off" placeholder="Service or Username" required>

    <label for="passwordAdmin">Master Password</label>
    <div class="input-group">
      <input type="password" id="passwordAdmin" class="form-control" placeholder="Master Password" required>
      <button id="masterPassAdmin" type="button" class="btn secondary-outline" data-adminpassword-id="passwordAdmin" name="passwordAdmin">Show</button>
    </div>

    <div class="toggles">
      <div class="toggle-container">
        <label for="toggle1Admin">Letters</label>
        <input type="checkbox" id="toggle1Admin" class="toggle active">
      </div>
      <div class="toggle-container">
        <label for="toggle2Admin">Numbers</label>
        <input type="checkbox" id="toggle2Admin" class="toggle active">
      </div>
      <div class="toggle-container">
        <label for="toggle3Admin">Symbols</label>
        <input type="checkbox" id="toggle3Admin" class="toggle">
      </div>
      <div class="toggle-container">
        <label for="toggle4Admin">Separator</label>
        <input type="checkbox" id="toggle4Admin" class="toggle active">
      </div>
      <input type="hidden" id="saltAdmin" value="">
    </div>

    <div class="input-group">
      <div class="toggle-container">
        <label for="lengthAdmin" style="margin-right: auto;">Length</label>
        <input max="999" min="1" type="number" id="lengthAdmin" class="form-control" value="43" step="1" required>
      </div>
      <div class="toggle-container" style="margin-left: auto;">
        <label for="iterationCountAdmin" style="margin-right: auto;">Password Security</label>
        <div class="input-group">
          <input maxlength="5" max="99999" min="1" type="password" inputmode="numeric" pattern="\d*" id="iterationCountAdmin" class="form-control" value="50000" step="1" required>
          <button id="iterCountAdmin" type="button" class="btn secondary-outline" data-adminpassword-id="iterationCountAdmin" name="iterationCountAdmin">Show</button>
        </div>
      </div>
    </div>

    <div style="align-items: center; display: flex; margin-bottom: 0.5rem;">
      <button id="collectInputAdmin" type="button" class="btn strong" style="margin-top: 1rem; font-weight: 500;">GET PASSWORD</button>
      <p id="generationStatusAdmin" style="visibility: hidden; color: #1E003B; margin-left: 1rem; margin-bottom: 2rem;">
        Generating passwords<span class="dot-loader"><span>.</span><span>.</span><span>.</span></span>
      </p>
    </div>

    <div id="generatedPasswordAdmin">
      <label for="mainPasswordAdmin">Main Password</label>
      <label id="createdforAdmin" class="form-label"></label>
      <div class="input-group">
        <input type="password" id="mainPasswordAdmin" class="form-control input-pwd" readonly>
        <button id="mainButtonAdmin" type="button" class="btn secondary-outline" data-adminpassword-id="mainPasswordAdmin" name="mainPasswordAdmin">Show</button>
        <button data-password-id="mainCopyAdmin" type="button" class="btn outline-gold" name="mainPasswordAdmin">Copy</button>
        <span id="copySuccessIcon-mainCopyAdmin" class="icon" style="display: none;"></span>
      </div>

      <div id="passwordStrengthContainerAdminPlus">
        <div id="passwordStrengthBarAdminPlus"></div>
        <span id="passwordStrengthTextAdminPlus"></span>
        <span id="entropyTextAdminPlus"></span>
      </div>
    </div>

    <div style="margin-top: 2rem;">
      <button id="closeAdminPasswordGenerator" type="button" class="btn secondary">Cancel</button>
    </div>
  </div>
</div>

  <script src="jquery.min.js"></script>
  <script src="crypto-js.min.js"></script>
  <script src="qrcode.min.js"></script>
  <script src="carrypass.min.js" defer></script>

</body>
</html>
